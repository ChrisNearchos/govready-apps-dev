id: system_stack
title: Information system stack
introduction:
  format: markdown
  template: |
    ## Share basic information about your system stack

    This module will ask you a few basic, high level questions about the *{{project}}* information system.

    This information will be used to tailor questions to your particular type and scale of your information system.

questions:
  - id: what_kind_of_system
    title: What Kind of System
    prompt: What kind of information technology system is this?
    type: choice
    choices:
    - key: application
      text: Application
      help: Any type of end-user facing software application including websites
    - key: service
      text: General Service
      help: Any type network or infrastructure component (e.g., storage system)

  - id : what_kind_of_application
    title: What Kind of Application
    prompt: What kind of application is it?
    type: choice
    choices:
    - key: web
      text: Web Site
    - key: desktop
      text: Desktop Software
    - key: server
      text: Server Software
    - key: saas
      text: Software as a Service
    impute:
    - condition: what_kind_of_system != 'application'
      value: ~

  - id: application_where_hosted
    title: Where Is The Application Hosted
    prompt: Where is the application hosted?
    type: choice
    choices:
    - key: cloud
      text: In The Cloud
    - key: onpremesis
      text: In an On-Premesis Data Center
    impute:
    - condition: what_kind_of_application not in ['web', 'server', 'saas']
      value: ~

  - id: cloud_provider
    title: Cloud Provider
    prompt: What cloud provider is the application hosted in?
    type: choice
    choices:
    - key: AWS
      text: Amazon Web Services
    - key: PWS
      text: Pivotal Cloud Foundry
    - key: Azure
      text: Microsoft Azure
    - key: other-fedramp
      text: Other FedRAMP Certified Cloud Service Provider
    - key: other
      text: Other (not a FedRAMP Certified Cloud Service Provider)
    impute:
    - condition: application_where_hosted != 'cloud'
      value: ~

  - id: web_page_views
    title: Website Page Views Per Month
    prompt: How many page views per month is the website designed to support?
    type: choice
    choices:
    - key: micro
      text: Micro (1K monthly views)
    - key: small
      text: Small (10K - 250K monthly views)
    - key: medium
      text: Medium (250K - 1M monthly views)
    - key: large
      text: Large (1M+ monthly views)
    impute:
    - condition: what_kind_of_application != "web"
      value: ~

  - id: what_kind_of_general_service
    title: What Kind of General Service
    prompt: What kind of general service is the application?
    type: choice
    choices:
    - key: network-system
      text: Network System
    - key: other
      text: Other
    impute:
    - condition: what_kind_of_system != 'service'
      value: ~

  - id: what_kind_of_general_service_other
    title: What Kind of General Service (Other)
    prompt: What kind of general service is the application?
    type: text
    impute:
    - condition: what_kind_of_general_service != 'other'
      value: ~

  - id: who_supports_it
    title: Who Develops and Supports It
    prompt: Who develops and supports the application?
    type: multiple-choice
    choices:
    - key: employees
      text: Employees
    - key: contractors
      text: Contractors

output:
  - title: Preliminary system stack summary
    format: markdown
    template: |

      You've gathered a high level view of *{{project}}*. Future questions will be tailored to your indicated type of information system.

      # System Stack Summary

      {% if what_kind_of_system == "application" %}
        The {{organization}}'s *{{project}}* information system is a {% if web_page_views %} {{web_page_views.text}} size {% endif %} {{what_kind_of_application.text}} {{what_kind_of_system.text}} {% if application_where_hosted %} hosted {{application_where_hosted.text}}{% endif %}{% if application_where_hosted == "cloud" %} at {{cloud_provider.text}}{% endif %}.

      {% else %}

      General Service Type: {% if what_kind_of_general_service != "other" %}{{what_kind_of_general_service}}{% else %}{{what_kind_of_general_service_other.text}}{% endif %}

      {% endif %}

      The {{project}} system is primarily supported by {{who_supports_it.text}}.
